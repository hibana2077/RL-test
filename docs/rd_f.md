# ğŸ¯ 1. Mario RL çš„åŸºæœ¬ reward ç›®æ¨™

åœ¨å¤§å¤šæ•¸ Mario RL è¨“ç·´ä¸­ï¼Œreward function é€šå¸¸æ„åœ–é¼“å‹µæ™ºèƒ½é«”ï¼š

* **ç›¡å¯èƒ½å¾€å³èµ°ï¼ˆå‰é€²åˆ°é—œå¡çµ‚é»ï¼‰**
* **åœ¨æœ€çŸ­æ™‚é–“å®Œæˆé—œå¡**
* **é¿å…æ­»äº¡æˆ–é­é‡æ•µäºº**

é€™é¡ reward å°æ‡‰åˆ°å¸¸è¦‹ Mario RL benchmarkï¼ˆå¦‚ Gym Super Mario Brosï¼‰ğŸ‘‡ ([Medium][1])

---

## ğŸ“Œ 2. ä¸€èˆ¬å¸¸ç”¨çš„ reward function å½¢å¼ï¼ˆGym Super Marioï¼‰

åœ¨å®˜æ–¹æˆ–ç¤¾ç¾¤å¸¸è¦‹å¯¦ä½œä¸­ï¼Œreward é€šå¸¸ç”±ä¸‰éƒ¨åˆ†çµ„æˆï¼š

### ğŸ”¹ Reward å®šç¾©

å°æ–¼æ¯ä¸€æ­¥ï¼ˆstepï¼‰ï¼š

```
r = v + c + d
```

å…¶ä¸­ï¼š

* **v = xâ‚ âˆ’ xâ‚€**
  Mario åœ¨æ°´å¹³æ–¹å‘çš„ä½ç§»å·®ï¼ˆå¾€å³èµ°æ™‚æ­£å€¼ï¼Œå¾€å·¦æˆ–ä¸å‹•å‰‡ç‚ºè² æˆ– 0ï¼‰
* **c = (clockâ‚€ âˆ’ clockâ‚)**
  æ™‚é–“å·®ï¼ˆé¼“å‹µå¿«é€šé—œï¼Œæ™‚é–“è¶Šå°‘å¾—è¶Šå¤šï¼‰
* **d = death penalty**
  è‹¥æ­»äº¡çµ¦äºˆè² æ‡²ç½°ï¼ˆå¦‚ âˆ’15ï¼‰
* Reward æœƒè¢« clip ï¼ˆä¾‹å¦‚ clip åˆ° [-15, 15]ï¼‰ä»¥ä¿æŒç©©å®šè¨“ç·´ã€‚ ([Medium][1])

---

## ğŸ“Œ 3. å…·é«” reward component èªªæ˜

### 1) **å¾€å³å‰é€²çå‹µ `v`**

* æ™ºèƒ½é«”å¾€å³èµ°ä¾¿å¢åŠ æ­£ rewardã€‚
* è‹¥å¾€å·¦èµ°æˆ–åœä½ï¼Œreward æœƒæ¸›å°‘æˆ–ç‚º 0ã€‚ ([Medium][1])

### 2) **æ™‚é–“æ‡²ç½° `c`**

* Mario ä¸–ç•Œæœ‰å€’æ•¸è¨ˆæ™‚å™¨ï¼ˆclockï¼‰ã€‚
* è®“æ™‚é–“æ¸›å°‘ï¼ˆclockâ‚€ âˆ’ clockâ‚ > 0ï¼‰èƒ½çµ¦äºˆæ­£å€¼ï¼Œé¼“å‹µå¿«é€Ÿé€šé—œã€‚ ([Medium][1])

### 3) **æ­»äº¡æ‡²ç½° `d`**

* è‹¥ Mario æ­»äº¡ï¼ˆæ‰é€²å‘è£¡æˆ–è¢«æ•µäººæ“Šä¸­ï¼‰ï¼Œçµ¦äºˆå¤§è² æ‡²ç½°é˜»æ­¢ RL agent åˆ©ç”¨ã€Œè‡ªæ®ºé¿å…æ™‚é–“æ‡²ç½°ã€ç­‰ä½œå¼Šç­–ç•¥ã€‚ ([å­¸ç”Ÿè«–æ–‡][2])

---

## ğŸ§  4. é™„åŠ è¨­è¨ˆï¼ˆè¦–å°ˆæ¡ˆä¸åŒ optionalï¼‰

æŸäº›å¯¦ä½œå¯èƒ½é¡å¤–åŠ å…¥ï¼š

âœ… æª¢æŸ¥é»çå‹µï¼ˆåˆ°ç‰¹å®šä½ç½®çµ¦ bonusï¼‰
âœ… æ”¶é›†ç‰©å“çå‹µï¼ˆä¾‹å¦‚æ”¶é›†ç¡¬å¹£æˆ– power-upï¼‰
âœ… æ•Œäººæ“Šæ®ºçå‹µ
âœ… è·‘å¾—å¤ªæ…¢æˆ–åœä½çš„é¡å¤–æ‡²ç½°
âœ… å¤§å‹è² çå‹µé¿å…ã€Œèµ°æ·å¾‘æ­»äº¡ã€ç­–ç•¥

---

## ğŸ§ª 5. ç¯„ä¾‹ï¼špython pseudo-code reward è¨­è¨ˆ

```python
x0, clock0, alive0 = prev_state['x'], prev_state['clock'], prev_state['alive']
x1, clock1, alive1 = cur_state['x'], cur_state['clock'], cur_state['alive']

v = x1 - x0                  # horizontal progress
c = clock0 - clock1          # time bonus
d = -15 if not alive1 else 0 # death penalty

reward = v + c + d           # total reward
reward = clip(reward, -15, 15)
```

æ­¤è¨­è¨ˆæ˜¯æœ€å¸¸è¦‹ä¸”æœ‰æ•ˆçš„ baseline reward function ä¹‹ä¸€ã€‚
